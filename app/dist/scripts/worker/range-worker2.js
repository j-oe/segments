!function(){var n,e,r;!function(t){function i(n,e){return M.call(n,e)}function o(n,e){var r,t,i,o,f,u,c,l,s,a,p,d,g=e&&e.split("/"),h=x.map,v=h&&h["*"]||{};if(n){for(n=n.split("/"),f=n.length-1,x.nodeIdCompat&&b.test(n[f])&&(n[f]=n[f].replace(b,"")),"."===n[0].charAt(0)&&g&&(d=g.slice(0,g.length-1),n=d.concat(n)),s=0;s<n.length;s++)if("."===(p=n[s]))n.splice(s,1),s-=1;else if(".."===p){if(0===s||1===s&&".."===n[2]||".."===n[s-1])continue;s>0&&(n.splice(s-1,2),s-=2)}n=n.join("/")}if((g||v)&&h){for(r=n.split("/"),s=r.length;s>0;s-=1){if(t=r.slice(0,s).join("/"),g)for(a=g.length;a>0;a-=1)if((i=h[g.slice(0,a).join("/")])&&(i=i[t])){o=i,u=s;break}if(o)break;!c&&v&&v[t]&&(c=v[t],l=s)}!o&&c&&(o=c,u=l),o&&(r.splice(0,u,o),n=r.join("/"))}return n}function f(n,e){return function(){var r=R.call(arguments,0);return"string"!=typeof r[0]&&1===r.length&&r.push(null),g.apply(t,r.concat([n,e]))}}function u(n){return function(e){return o(e,n)}}function c(n){return function(e){m[n]=e}}function l(n){if(i(y,n)){var e=y[n];delete y[n],w[n]=!0,d.apply(t,e)}if(!i(m,n)&&!i(w,n))throw new Error("No "+n);return m[n]}function s(n){var e,r=n?n.indexOf("!"):-1;return r>-1&&(e=n.substring(0,r),n=n.substring(r+1,n.length)),[e,n]}function a(n){return n?s(n):[]}function p(n){return function(){return x&&x.config&&x.config[n]||{}}}var d,g,h,v,m={},y={},x={},w={},M=Object.prototype.hasOwnProperty,R=[].slice,b=/\.js$/;h=function(n,e){var r,t=s(n),i=t[0],f=e[1];return n=t[1],i&&(i=o(i,f),r=l(i)),i?n=r&&r.normalize?r.normalize(n,u(f)):o(n,f):(n=o(n,f),t=s(n),i=t[0],n=t[1],i&&(r=l(i))),{f:i?i+"!"+n:n,n:n,pr:i,p:r}},v={require:function(n){return f(n)},exports:function(n){var e=m[n];return void 0!==e?e:m[n]={}},module:function(n){return{id:n,uri:"",exports:m[n],config:p(n)}}},d=function(n,e,r,o){var u,s,p,d,g,x,M,R=[],b=typeof r;if(o=o||n,x=a(o),"undefined"===b||"function"===b){for(e=!e.length&&r.length?["require","exports","module"]:e,g=0;g<e.length;g+=1)if(d=h(e[g],x),"require"===(s=d.f))R[g]=v.require(n);else if("exports"===s)R[g]=v.exports(n),M=!0;else if("module"===s)u=R[g]=v.module(n);else if(i(m,s)||i(y,s)||i(w,s))R[g]=l(s);else{if(!d.p)throw new Error(n+" missing "+s);d.p.load(d.n,f(o,!0),c(s),{}),R[g]=m[s]}p=r?r.apply(m[n],R):void 0,n&&(u&&u.exports!==t&&u.exports!==m[n]?m[n]=u.exports:p===t&&M||(m[n]=p))}else n&&(m[n]=r)},n=e=g=function(n,e,r,i,o){if("string"==typeof n)return v[n]?v[n](e):l(h(n,a(e)).f);if(!n.splice){if(x=n,x.deps&&g(x.deps,x.callback),!e)return;e.splice?(n=e,e=r,r=null):n=t}return e=e||function(){},"function"==typeof r&&(r=i,i=o),i?d(t,n,e,r):setTimeout(function(){d(t,n,e,r)},4),g},g.config=function(n){return g(n)},n._defined=m,r=function(n,e,r){if("string"!=typeof n)throw new Error("See almond README: incorrect module build, no module name");e.splice||(r=e,e=[]),i(m,n)||i(y,n)||(y[n]=[n,e,r])},r.amd={jQuery:!0}}(),r("almond",function(){}),e([],function(){self.postMessage({ready:!0});var n={findRanges:function(e){var r=n.findMinima(e),t=n.clusterMinima(r),i=n.deriveRanges(t),o=n.findClassForRange(i,e),f=n.groupRanges(o);self.postMessage(f)},findMinima:function(n){function e(r,t){return!(n[r+t].cfd<n[r].cfd)&&(n[r+t].cfd>n[r].cfd||(n[r+t].cfd===n[r].cfd?e(r+t,t):void 0))}for(var r=[],t=1;t<n.length-1;t++)n[t].idx=t,n[t].cfd<20&&e(t,-1)&&e(t,1)&&r.push(n[t]);return r},clusterMinima:function(n){function e(i){var o=[];if(i<n.length)for(var f=i;f<n.length-1;f++){if(n[f+1].idx>n[f].idx+r)return o.push(n[f]),t.push(o),e(f+1);o.push(n[f])}}var r=5,t=[];return e(0),t},deriveRanges:function(n){for(var e=[],r=0;r<n.length;r++){var t=0===r?0:n[r-1][n[r-1].length-1].idx;end=n[r][0].idx,end-t>=5&&e.push([t,end])}return e},findClassForRange:function(n,e){for(var r=[],t=0;t<n.length;t++){for(var i={},o={},f=[],u=0,c=n[t][0];c<=n[t][1];c++)i.hasOwnProperty(e[c].clf)||(i[e[c].clf]=0,o[e[c].clf]=[]),i[e[c].clf]+=e[c].cfd,o[e[c].clf].push(e[c].cfd),u++;for(var l in i)f.push([l,Math.floor(i[l]/u),function(n){n.sort(function(n,e){return n-e});var e=Math.floor(n.length/2);return n.length%2?n[e]:(n[e-1]+n[e])/2}(o[l])]);f.sort(function(n,e){return e[2]-n[2]}),f[0][2]>50&&r.push({clf:f[0][0],cfd:f[0][2],start:e[n[t][0]].pos,end:e[n[t][1]].pos})}return r},groupRanges:function(n){for(var e=[n[0]],r=1;r<n.length;r++)e[e.length-1].clf===n[r].clf?e[e.length-1].end=n[r].end:e.push(n[r]);return e}};self.addEventListener("message",function(e){var r=e.data[0],t=e.data.splice(1);if(!n.hasOwnProperty(r))throw new Error("No function with name: "+r);n[r].apply(this,t)})}),r("rgWorker",function(){}),e(["rgWorker"])}();